#!/usr/bin/env python3
"""
π¤– ADK + A2A ν†µν•© μ—¬ν–‰ μ¶”μ² μ—μ΄μ „νΈ μ‹μ¤ν… - λ©”μΈ μ‹¤ν–‰ μ¤ν¬λ¦½νΈ

μ΄ μ¤ν¬λ¦½νΈλ” ADKμ™€ A2Aμ μ°¨μ΄μ μ„ μ‹¤μ¦ν•λ” ν†µν•© λ°λ¨λ¥Ό μ κ³µν•©λ‹λ‹¤.
"""

import asyncio
import sys
from pathlib import Path

# ν„μ¬ λ””λ ‰ν† λ¦¬λ¥Ό Python κ²½λ΅μ— μ¶”κ°€
current_dir = Path(__file__).parent
sys.path.insert(0, str(current_dir))

from integration_example import main as run_integration_demo
from adk_agents.travel_agent import test_adk_travel_agent
from a2a_agents.travel_agent import test_a2a_communication


def print_banner():
    """ν”„λ΅μ νΈ λ°°λ„ μ¶λ ¥"""
    banner = """
ππππππππππππππππππππππππππππππ
   π¤– ADK + A2A ν†µν•© μ—¬ν–‰ μ¶”μ² μ—μ΄μ „νΈ μ‹μ¤ν…
ππππππππππππππππππππππππππππππ

   Google ADKμ™€ A2A Protocolμ μ°¨μ΄μ κ³Ό μƒνΈ λ³΄μ™„ κ΄€κ³„ μ‹¤μ¦

   π’΅ ν•µμ‹¬ μ°¨μ΄μ :
   β€Ά ADK = μ—μ΄μ „νΈ λ‚΄λ¶€ κ°λ° ν”„λ μ„μ›ν¬ (λ΅μ§Β·μ›ν¬ν”λ΅μ° μ¤‘μ‹¬)
   β€Ά A2A = μ—μ΄μ „νΈ κ°„ ν†µμ‹  ν‘μ¤€ (μΈν„°νμ΄μ¤ μ¤‘μ‹¬)
   β€Ά ν†µν•© = ADK_internal_logic + A2A_communication_wrapper

ππππππππππππππππππππππππππππππ
"""
    print(banner)


def print_menu():
    """λ©”λ‰΄ μ¶λ ¥"""
    menu = """
π“‹ μ‹¤ν–‰ μµμ…μ„ μ„ νƒν•μ„Έμ”:

1. π― ν†µν•© λ°λ¨ (ADK + A2A μ°¨μ΄μ  μ‹¤μ¦)
2. π§  ADK μ—μ΄μ „νΈ ν…μ¤νΈ (λ‚΄λ¶€ μ›ν¬ν”λ΅μ°)
3. π“΅ A2A μ—μ΄μ „νΈ ν…μ¤νΈ (ν†µμ‹  ν”„λ΅ν† μ½)
4. π“ ν”„λ΅μ νΈ μ •λ³΄ λ³΄κΈ°
5. β μΆ…λ£

μ„ νƒ (1-5): """
    return input(menu).strip()


def print_project_info():
    """ν”„λ΅μ νΈ μ •λ³΄ μ¶λ ¥"""
    info = """
π“ ADK + A2A ν†µν•© ν”„λ΅μ νΈ μ •λ³΄
================================================================================

π― ν”„λ΅μ νΈ λ©μ :
   Googleμ ADKμ™€ A2A κΈ°μ μ μ°¨μ΄μ μ„ μ‹¤μ  μ½”λ“λ΅ κµ¬ν„ν•μ—¬ μ‹¤μ¦

π—οΈ μ•„ν‚¤ν…μ²:
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
   β”‚                    ν†µν•© μ—μ΄μ „νΈ μ‹μ¤ν…                            β”‚
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
   β”‚  π§  ADK (λ‚΄λ¶€ κµ¬μ΅°)          β”‚  π“΅ A2A (ν†µμ‹  μΈν„°νμ΄μ¤)      β”‚
   β”‚  β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€       β”‚  β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€        β”‚
   β”‚  β€Ά BaseAgent μƒμ†            β”‚  β€Ά JSON-RPC ν”„λ΅ν† μ½           β”‚
   β”‚  β€Ά State κ΄€λ¦¬ (enum)         β”‚  β€Ά Agent Card μ„λΉ„μ¤           β”‚
   β”‚  β€Ά Sequential/Parallel       β”‚  β€Ά μΈμ¦ & μ„Έμ… κ΄€λ¦¬            β”‚
   β”‚  β€Ά λ„κµ¬ μ²΄μ΄λ‹ & MCP         β”‚  β€Ά μ¤νΈλ¦¬λ° μ§€μ›               β”‚
   β”‚  β€Ά μ΄λ²¤νΈ κΈ°λ° μ½λ°±          β”‚  β€Ά λ¶„μ‚° μ—μ΄μ „νΈ ν‘μ—…          β”‚
   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

π“‚ μ£Όμ” νμΌ:
   β€Ά integration_example.py   - ADK + A2A ν†µν•© λ°λ¨
   β€Ά adk_agents/travel_agent.py - ADK κΈ°λ° μ—μ΄μ „νΈ (λ‚΄λ¶€ λ΅μ§)
   β€Ά a2a_agents/travel_agent.py - A2A κΈ°λ° μ—μ΄μ „νΈ (ν†µμ‹  μΈν„°νμ΄μ¤)
   β€Ά adk_config.py            - ADK μ„¤μ •

π€ κ°λ° νλ¦„:
   1οΈβƒ£  ADKλ΅ μ—μ΄μ „νΈ λ‚΄λ¶€ κµ¬ν„ (λ΅μ§Β·μ›ν¬ν”λ΅μ°)
   2οΈβƒ£  A2Aλ΅ ν†µμ‹  μΈν„°νμ΄μ¤ κµ¬μ„± (μΈν„°νμ΄μ¤)
   3οΈβƒ£  ν†µν•©ν•μ—¬ μ™„μ „ν• λ¶„μ‚° μ—μ΄μ „νΈ μ‹μ¤ν… κµ¬μ¶•

π’΅ ν•™μµ ν¬μΈνΈ:
   β€Ά ADK = "μ—μ΄μ „νΈλ¥Ό μ–΄λ–»κ² λ§λ“¤ κ²ƒμΈκ°€?" (How to Build)
   β€Ά A2A = "μ—μ΄μ „νΈλ“¤μ„ μ–΄λ–»κ² μ—°κ²°ν•  κ²ƒμΈκ°€?" (How to Connect)
   β€Ά μƒνΈ λ³΄μ™„μ  κ΄€κ³„λ΅ μ™„μ „ν• μ—μ΄μ „νΈ μƒνƒκ³„ κµ¬ν„

================================================================================
"""
    print(info)


async def main():
    """λ©”μΈ μ‹¤ν–‰ ν•¨μ"""
    print_banner()

    while True:
        try:
            choice = print_menu()

            if choice == "1":
                print("π― ν†µν•© λ°λ¨ μ‹¤ν–‰ μ¤‘...")
                print("   ADKμ™€ A2Aμ μ°¨μ΄μ κ³Ό μƒνΈ λ³΄μ™„ κ΄€κ³„λ¥Ό μ‹¤μ¦ν•©λ‹λ‹¤.\n")
                await run_integration_demo()

            elif choice == "2":
                print("π§  ADK μ—μ΄μ „νΈ ν…μ¤νΈ μ‹¤ν–‰ μ¤‘...")
                print("   μ—μ΄μ „νΈ λ‚΄λ¶€ κµ¬μ΅°μ™€ μ›ν¬ν”λ΅μ°λ¥Ό ν…μ¤νΈν•©λ‹λ‹¤.\n")
                await test_adk_travel_agent()

            elif choice == "3":
                print("π“΅ A2A μ—μ΄μ „νΈ ν…μ¤νΈ μ‹¤ν–‰ μ¤‘...")
                print("   μ—μ΄μ „νΈ κ°„ ν†µμ‹  ν”„λ΅ν† μ½μ„ ν…μ¤νΈν•©λ‹λ‹¤.\n")
                await test_a2a_communication()

            elif choice == "4":
                print_project_info()

            elif choice == "5":
                print("π‘‹ ν”„λ΅κ·Έλ¨μ„ μΆ…λ£ν•©λ‹λ‹¤. κ°μ‚¬ν•©λ‹λ‹¤!")
                break

            else:
                print("β μλ»λ μ„ νƒμ…λ‹λ‹¤. 1-5 μ‚¬μ΄μ μ«μλ¥Ό μ…λ ¥ν•΄μ£Όμ„Έμ”.")

            # κ° μ‹¤ν–‰ ν›„ μ‚¬μ©μ μ…λ ¥ λ€κΈ°
            if choice in ["1", "2", "3"]:
                input("\nβΈοΈ  κ²°κ³Όλ¥Ό ν™•μΈν•μ…¨μΌλ©΄ Enterλ¥Ό λλ¬ λ©”λ‰΄λ΅ λμ•„κ°€μ„Έμ”...")

        except KeyboardInterrupt:
            print("\n\nπ‘‹ ν”„λ΅κ·Έλ¨μ΄ μ¤‘λ‹¨λμ—μµλ‹λ‹¤.")
            break
        except Exception as e:
            print(f"β μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤: {e}")
            input("Enterλ¥Ό λλ¬ κ³„μ†...")


def run_sync():
    """λ™κΈ° μ‹¤ν–‰ ν•¨μ (μ§„μ…μ μ©)"""
    try:
        asyncio.run(main())
    except KeyboardInterrupt:
        print("\nπ‘‹ ν”„λ΅κ·Έλ¨μ„ μΆ…λ£ν•©λ‹λ‹¤.")
    except Exception as e:
        print(f"β μ‹¤ν–‰ μ¤‘ μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤: {e}")


if __name__ == "__main__":
    # μ§μ ‘ μ‹¤ν–‰μ‹ λ©”λ‰΄ λ°©μ‹μΌλ΅ μ‹¤ν–‰
    run_sync()
